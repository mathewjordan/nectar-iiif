var W=Object.defineProperty,_=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var z=(t,e,r)=>e in t?W(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,n=(t,e)=>{for(var r in e||(e={}))D.call(e,r)&&z(t,r,e[r]);if(w)for(var r of w(e))K.call(e,r)&&z(t,r,e[r]);return t},$=(t,e)=>_(t,P(e));import I from"react";import{createStitches as B}from"@stitches/react";var{styled:l,css:Lt,keyframes:xt}=B({prefix:"nectar"});var u=(t,e="none")=>{var a;if(!t)return null;if(typeof t=="string")return[t];if(!t[e]){let o=Object.getOwnPropertyNames(t);if(o.length>0)return(a=t[o[0]])==null?void 0:a.join(", ")}return!t[e]||!Array.isArray(t[e])?null:t[e].join(", ")};import J from"sanitize-html";function j(t){return{__html:Q(t)}}function s(t,e){let r=Object.keys(t).filter(o=>e.includes(o)?null:o),a=new Object;return r.forEach(o=>{a[o]=t[o]}),a}function Q(t){return J(t,{allowedAttributes:{a:["href"],img:["alt","src"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}var U=l("a",{}),X=t=>{let{children:e,homepage:r}=t,o=s(t,["children","homepage"]);return I.createElement(I.Fragment,null,r&&r.map(i=>{let c=u(i.label,o.lang);return I.createElement(U,n({"aria-label":e?c:void 0,href:i.id,key:i.id},o),e||c)}))},Y=X;import Z from"react";var tt=l("span",{}),et=t=>{let{as:e,label:r}=t,o=s(t,["as","label"]);return Z.createElement(tt,n({as:e},o),u(r,o.lang))},R=et;import p from"react";import x from"react";import at from"react";import k from"react";var rt=l("span",{}),ot=t=>{let{as:e,markup:r}=t;if(!r)return k.createElement(k.Fragment,null);let o=s(t,["as","markup"]),i=j(u(r,o.lang));return k.createElement(rt,$(n({as:e},o),{dangerouslySetInnerHTML:i}))},S=ot;var it=({as:t="dd",lang:e,value:r})=>at.createElement(S,{markup:r,as:t,lang:e}),L=it;var nt=t=>{let{item:e,lang:r}=t,{label:a,value:o}=e;return x.createElement("div",{role:"group"},x.createElement(R,{as:"dt",label:a,lang:r}),x.createElement(L,{as:"dd",value:o,lang:r}))},h=nt;var st=l("dl",{}),mt=t=>{let{as:e,metadata:r}=t;if(!Array.isArray(r))return p.createElement(p.Fragment,null);let o=s(t,["as","metadata"]);return p.createElement(p.Fragment,null,r.length>0&&p.createElement(st,n({as:e},o),r.map((i,c)=>p.createElement(h,{item:i,key:c,lang:o.lang}))))},lt=mt;import v from"react";var ut=l("dl",{}),ct=t=>{let{as:e,requiredStatement:r}=t;if(!r)return v.createElement(v.Fragment,null);let o=s(t,["as","requiredStatement"]);return v.createElement(ut,n({as:e},o),v.createElement(h,{item:r,lang:o.lang}))},ft=ct;import E from"react";var pt=l("li",{}),dt=l("ul",{}),gt=t=>{let{as:e,seeAlso:r}=t,o=s(t,["as","seeAlso"]);return E.createElement(dt,{as:e},r&&r.map(i=>{let c=u(i.label,o.lang);return E.createElement(pt,{key:i.id},E.createElement("a",n({href:i.id},o),c||i.id))}))},yt=gt;import bt from"react";var St=t=>{let{as:e,summary:r}=t,o=s(t,["as","summary"]);return bt.createElement(S,n({as:e,markup:r},o))},ht=St;import T from"react";import A,{useEffect as G,useRef as vt}from"react";import y from"hls.js";var q=(t,e="200,",r="full")=>{Array.isArray(t)&&(t=t[0]);let{id:a,service:o}=t,i;if(!o)return a;if(Array.isArray(t.service)&&t.service.length>0&&(i=o[0]),i){if(i["@id"])return`${i["@id"]}/${r}/${e}/0/default.jpg`;if(i.id)return`${i.id}/${r}/${e}/0/default.jpg`}};var O=l("img",{objectFit:"cover"}),At=t=>{let e=vt(null),{contentResource:r,altAsLabel:a}=t,o;a&&(o=u(a));let c=s(t,["contentResource","altAsLabel"]),{type:M,id:f,width:C=200,height:F,format:It,duration:b}=r;G(()=>{if(!f&&!e.current||["Image"].includes(M)||!f.includes("m3u8"))return;let m=new y;return e.current&&(m.attachMedia(e.current),m.on(y.Events.MEDIA_ATTACHED,function(){m.loadSource(f)})),m.on(y.Events.ERROR,function(d,g){if(g.fatal)switch(g.type){case y.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${d} network error encountered, try to recover`),m.startLoad();break;case y.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${d} media error encountered, try to recover`),m.recoverMediaError();break;default:m.destroy();break}}),()=>{m&&(m.detachMedia(),m.destroy())}},[]),G(()=>N(),[]);let N=()=>{if(!e.current)return;let m=0,d=30;if(b&&(d=b),!f.split("#t=")&&b&&(m=b*.1),f.split("#t=").pop()){let H=f.split("#t=").pop();H&&(m=parseInt(H.split(",")[0]))}let g=e.current;g.currentTime=m,g.play(),setTimeout(()=>N(),d*1e3)};switch(M){case"Image":let m=q(r);return A.createElement(O,n({as:"img",alt:o,css:{width:C,height:F},key:f,src:m},c));case"Video":return A.createElement(O,{as:"video",css:{width:C,height:F},disablePictureInPicture:!0,key:f,loop:!0,muted:!0,onPause:N,ref:e,src:f});default:return console.warn(`Resource type: ${M} is not valid or not yet supported in Nectar.`),A.createElement(A.Fragment,null)}},V=At;var Mt=t=>{let{thumbnail:e}=t,a=s(t,["thumbnail"]);return T.createElement(T.Fragment,null,e&&e.map(o=>T.createElement(V,n({contentResource:o,key:o.id},a))))},Nt=Mt;export{Y as Homepage,R as Label,lt as Metadata,ft as RequiredStatement,yt as SeeAlso,ht as Summary,Nt as Thumbnail,L as Value};
//# sourceMappingURL=index.esm.js.map
